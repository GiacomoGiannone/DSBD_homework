# Kustomization file for easy deployment
# Usage: kubectl apply -k k8s/
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: dsbd

resources:
  - namespace.yaml
  - configmaps.yaml
  - userdb.yaml
  - datadb.yaml
  - kafka.yaml
  - user-manager.yaml
  - data-collector.yaml
  - alert-system.yaml
  - alert-notifier.yaml
  - api-gateway.yaml
  - ingress.yaml

labels:
  - pairs:
      project: dsbd-flight-tracker
      environment: development
    includeSelectors: true

# Generate secrets from local env file copied by deploy script
secretGenerator:
  - name: db-secrets
    envs:
      - .secrets.env
    type: Opaque
  - name: smtp-secrets
    envs:
      - .secrets.env
    type: Opaque
  - name: opensky-secrets
    envs:
      - .secrets.env
    type: Opaque
